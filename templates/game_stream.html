{% extends "layout.html" %}
{% block stream %}
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

<script>

$(function($){
    window.setInterval(function(){
        loadNewStream()
    }, 1000)

function loadNewStream(){
    $.ajax({
        url: '/update_stream',
        type: 'POST',
        dataType: 'json',
        success: function(data){
            $(test).replaceWith(data);
        }
    });
}
});

</script>


<table class="table table-striped table-dark">
    <h4>Game Stream</h4>
    <thead>
      <tr>
        <th>Date</th>
        <th>Game Type</th>
        <th>Table ID</th>
        <th>Table Name</th>
        <th>Rounds</th>
        <th>Currency</th>
        <th>Wager</th>
        <th>Payout</th>
      </tr>
    </thead>
    <tbody>
<div id="msgid">
</div>
    </tbody>
  </table>

<div id="test">
    {{ datastream }}
</div>

{% endblock stream %}
